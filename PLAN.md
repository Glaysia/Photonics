# 목적
- 논문 `High-Q photonic nanocavity in a two-dimensional photonic crystal`(Akahane et al., Nature 2003)의 핵심 아이디어(가우시안 형태로 완만한 에지 변형 → 누설 k-성분 억제 → Q 상승)를 참고해, 2D 포토닉 크리스탈 기반 고-Q 나노캐비티를 FEA로 재현·확장한다.

# 주요 참고 파라미터 (논문)
- 베이스 격자: 삼각 격자, 격자상수 `a = 0.42 μm`, 슬랩 두께 `T = 0.6a (~0.25 μm)`, 에어홀 반지름 `R = 0.29a (~0.12 μm)`.
- 캐비티 초기 구조: 3개 연속 결손(air-hole 제거) 후, 양끝 홀을 소량 외측/내측 변위시켜 모드 에지의 공간 분포를 가우시안 엔벌프로 설계.
- 목표 성능: `Q ≈ 4.5×10^4`, `V ≈ 7.0×10^-14 cm^3`, 넓은 FSR (~100 nm).

# 작업 범위 (이번 단계)
- FEA 툴체인: C++/MFEM 기반 2D 유효굴절률 모델(H(curl) 혹은 H1 기반 자기/전기 스칼라 근사)을 1차 타겟으로 구성.
- 기하 정의: 삼각 격자 파라미터화(격자상수, 홀 반경, 변위량), 3홀 결손 및 에지 변형을 함수로 생성.
- 경계 처리: 계산 영역 외곽에 PML 또는 퍼펙트 매칭 경계 조건 적용해 방사 손실 추출 가능하도록 설정.
- 고유값 문제: 맥스웰(또는 TE/TM 스칼라 근사) 고유모드 계산 → 복소 고유주파수로부터 Q 추정.
- 후처리: 모드 프로파일, k-공간(Fourier) 분포 시각화해 누설 성분 확인; Q, V 계산 및 파라미터 스윕 준비.
- 파이썬 시각화: MFEM 출력(필드, 메쉬)을 Python(numpy/matplotlib)으로 로딩해 기하/모드/Fourier/Q-스윕 결과를 즉시 확인하는 스크립트 포함.

# 구체적 TODO
- [ ] MFEM 설정: H(curl) 2D/3D 중 선택(초기엔 2D 유효 굴절률 근사), 예제 코드 골격 준비.
- [ ] 격자 생성기: 삼각 격자 + 결손 + 에지 변위 파라미터화(입력: a, R, 변위 d, 슬랩 두께/유효 n).
- [ ] PML/경계: 도메인 외곽에 PML 레이어 삽입 또는 1차로 주기경계+슈퍼셀 접근 비교.
- [ ] 고유값 해석: 기본 모드 구하고 복소 ω로 Q 추정(Q = Re(ω)/(2 Im(ω))).
- [ ] 검증: 논문 파라미터로 모드 프로파일, Q 추정치, k-공간 분포를 산출해 재현성 체크.
- [ ] 파이썬 시각화 스크립트: 
  - 메쉬/홀 배치/에지 변위 렌더링(geometry plot).
  - 필드 분포(실수/허수/|E|) 플롯 + 선단면.
  - k-공간(Fourier) 스펙트럼 플롯으로 누설 영역 표시.
  - Q, V, 주파수 vs 파라미터 스윕 결과를 라인/히트맵으로 시각화.
- [ ] 다음 단계 준비: 변위 최적화(가우시안 엔벌프 형태), 홀 반경/슬랩 두께 스윕 자동화.
- [ ] 병렬/가속화: MFEM을 MPI(pmfem) + Hypre/SLEPc로 빌드해 ParMesh/ParFiniteElementSpace로 전환, 이후 CUDA 13.0 백엔드 활성화(3070)하여 어셈블리·선형해를 GPU로 오프로딩하고 고유값 반복(PETSc/SLEPc) CPU 분담 프로파일링.

# 제외/보류
- 3D 전파 모드 정밀 모델(완전 벡터 슬랩 모드) 및 공정 변동성(라인에지 거칠기) 모델링은 1차 구현 후 검증 완료 시 착수.
